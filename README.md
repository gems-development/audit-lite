# AuditLite

**AuditLite** — это легковесное решение для аудита действий пользователей в системах, работающих с чувствительными данными. Проект позволяет фиксировать действия сотрудников, помогая выявлять нарушения, злоупотребления и утечки информации.

---

## Зависимости

- **.NET 8.0 SDK**
- Подключение к внешней СУБД (см. ниже список поддерживаемых)

---

## Установка и запуск

1. Перейдите в корневую папку вашего проекта. Откройте консоль.
2. Установите библиотеку: `dotnet add package AuditLiteLib --version 1.0.0`
3. Добавьте пространство имён: `using AuditLiteLib;`
4. Убедитесь, что запущены AuditLiteService и выбранная СУБД _(см. список поддерживаемых)._
5. Наслаждайтесь использованием!

**Пример минимальной инициализации:**

```csharp
await using var auditManager = AuditManagerFactory.Create(configure =>
		{configure.SetServerUrl("http://localhost:5001");} 

await auditManager.CreateAuditEventAsync("YourEventType", eventData);
```
> **Примечание:** Инструкции по установке и запуску будут расширяться.  
> Настройка осуществляется через `appsettings.json`.
---

## Конфигурация

AuditLite предоставляет гибкие настройки для адаптации под ваши требования.

| Параметр                   | Описание                                                                                                                                                                                   |
|----------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `ServerUrl`                | **URL сервиса AuditLiteService. Обязательный параметр.**                                                                                                                                   |
| `FlushIntervalMilliseconds` | Интервал (в миллисекундах) автоматической выгрузки и отправки событий. <br> Значение `-1` отключает таймер. <br> Значение по умолчанию `10.000` мс.                                        |
| `MaxBufferSize`            | Максимальная вместительность буфера для событий. <br> Значение должно быть больше `0`. <br> Значение по умолчанию `1.000`.                                                                 |
| `MaxChunkedRetries`        | Количество попыток отправки пакетов событий чанками, в случае превышения максимального размера пакета в 4мб. <br> Значение `0` отключает отправку чанками. <br> Значение по умолчанию `3`. |

**Пример полной конфигурации:**
```csharp
await using var auditManager = AuditManagerFactory.Create(configure =>
{
    configure.SetServerUrl("http://localhost:5001")
             .SetFlushIntervalMilliseconds(10000)
             .SetMaxBufferSize(1000)
             .SetMaxChunkedRetries(3);    
});
```

## Структура проекта

- `AuditLiteLib` — библиотека с основной логикой аудита  
- `AuditLiteService` — сервис для работы с базой данных и API

---

## Основные возможности

- **Фиксация деталей события**
  - Запись типа операции, даты и времени, пользовательского окружения (имя пользователя, название метода, устройство, IP-адрес)
  - Поддержка пользовательских полей (custom fields)

- **Визуализация и мониторинг**
  - Интеграция с инструментами визуализации (например, [Grafana](https://grafana.com/))
  - Выявление аномальных и нелегитимных действий

- **Гибкая настройка**
  - Настройка частоты отправки событий и размера буфера
  - Использование gRPC + Protobuf для высокопроизводительной передачи данных

- **Эффективное хранение данных**
  - Оптимизированная структура базы данных
  - Поддерживаемые СУБД:
    - MongoDB
    - Elasticsearch
    - PostgreSQL

---

## Лицензия

Этот проект распространяется под лицензией [MIT](LICENSE).

---

## Контакты

Если у вас есть вопросы:

- [Petr0131](https://github.com/Petr0131)  
- [Kolistro](https://github.com/Kolistro)